<html>
  <head>
    <title> Anichart : Tu Lista de Animes  </title>
    <style>
      #lista_animes{
        background-color: orange;
      }
	  #Boton_Insertar{
		background-color: black;
		color: white;
	  }
	   #Boton_Update{
		background-color: white;
		color: black;
	  }
	  #cuerpo{
		background-image : url("https://pbs.twimg.com/media/D5Fg6bOX4AA7zPa.jpg");
		background-repeat:no-repeat;
		background-size: contain;
	  }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body id="cuerpo">
    <ol id="lista_animes"></ol>

    <input id="texto" type="text" name="newEl"/>

    <button id ="Boton_Insertar"> Add Element </button>
    <button id = "Boton_Update"> Refresh </button>
  <script type="text/javascript">
        var i =localStorage.length;

		function pinta(){
		  alert("Hay un total de "+ localStorage.length + " Elementos en la local Storage ");
          $("#lista_animes").empty();

		  for(var key in localStorage){
			if(localStorage.getItem(key) != null){
				var valores = localStorage.getItem(key);
				$("#lista_animes").append("<li>" + valores + "<button>Delete</button>"+"</li>");
			}
          }
        };
		    function update(){
          pinta();
        };
        function addElem() {
		  var texto = $("#texto").val();
          var ElementoNuevo = $("<li>"+texto+" "+"<button> Delete </button>"+"</li>");
          ElementoNuevo.attr("id", i);
		  i++;
          localStorage.setItem(i, texto);
          $("#lista_animes").append(ElementoNuevo);
			$("#texto").val("");

        };
        $("#lista_animes").on("click","button",function(){
          var valor = $(this).closest("li").text();
		  var SubString = valor.substr(0, valor.length-6);
		  for (var  key in localStorage){
			if (SubString == localStorage.getItem(key)) {
				localStorage.removeItem(key);
            }
          }
		  $(this).closest("li").remove();
        });
        $(document).ready( function ()  {
            $('#Boton_Insertar').click(addElem);
            $('#Boton_Update').click(update);
        });
      </script>
  </body>
  
</html>
